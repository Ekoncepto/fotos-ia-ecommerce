# Risk Profile: Story 2.4

Date: 2025-09-10
Reviewer: Quinn (Test Architect)

## Executive Summary

- Total Risks Identified: 9
- Critical Risks: 0
- High Risks: 2
- Risk Score: 58/100

## High Risks Requiring Attention

### 1. [TECH-001]: Incorrect credit/accounting on discard actions
**Score: 6 (High)**
**Probability**: Medium — Edge cases when removing images vs refinements.
**Impact**: High — User trust and billing issues.
**Mitigation**:
- Explicit state transitions and idempotent discard operations.
- Contract tests ensuring discards don’t consume refinement credits.
- Clear UI confirmations with undo where feasible.
**Testing Focus**: Accounting flows across accept/discard with/without feedback.

### 2. [DATA-001]: Feedback storage privacy/retention risks
**Score: 6 (High)**
**Probability**: Medium — User-provided feedback may include sensitive info.
**Impact**: High — Compliance and user trust implications.
**Mitigation**:
- Minimize stored data; predefined reasons only; optional free-text guarded.
- Access controls; retention windows; anonymization/aggregation for analytics.
**Testing Focus**: Access control tests; data retention and export/delete requests.

## Risk Distribution

### By Category
- Security: 1
- Technical: 4
- Performance: 1
- Data/Privacy: 2
- Business: 1
- Operational: 0

### By Component
- Feedback UI + persistence + accounting: 9 risks

## Detailed Risk Register

| Risk ID  | Description                                                                 | Probability | Impact     | Score | Priority | Mitigation Actions |
| -------- | --------------------------------------------------------------------------- | ----------- | ---------- | ----- | -------- | ------------------ |
| TECH-001 | Wrong credit accounting on discard; double-charging or free rides.          | Medium (2)  | High (3)   | 6     | High     | Clear contract; idempotent operations; accounting tests. |
| DATA-001 | Feedback may contain PII; unclear retention.                                | Medium (2)  | High (3)   | 6     | High     | Predefined reasons; minimize free-text; retention policy. |
| SEC-001  | Authorization checks for discard/delete endpoints.                          | Low (1)     | High (3)   | 3     | Low      | AuthZ middleware; route tests; audit logs. |
| TECH-002 | Concurrency issues causing stale UI or lost updates.                        | Medium (2)  | Medium (2) | 4     | Medium   | Optimistic updates w/ server reconciliation; ETag/versioning. |
| BUS-001  | Irreversible deletions frustrate users.                                     | Medium (2)  | Medium (2) | 4     | Medium   | Confirmation modals; undo window; clear messaging. |
| TECH-003 | Analytics pipeline inconsistency (event schema drift).                      | Low (1)     | Medium (2) | 2     | Low      | Versioned analytics schema; contract tests. |
| PERF-001 | Large feedback datasets impacting queries.                                  | Low (1)     | Medium (2) | 2     | Low      | Indices/partitioning; retention; aggregation. |
| TECH-004 | Observability gaps linking feedback to image versions.                      | Low (1)     | Medium (2) | 2     | Low      | Correlate IDs; trace feedback→image→package.
| TECH-005 | UI inconsistencies across devices/locales.                                  | Low (1)     | Medium (2) | 2     | Low      | Responsive design; i18n length tests. |

## Risk-Based Testing Strategy

### Priority 1: High Risk Tests
- Accounting tests: discard vs refine vs accept across edge cases.
- Privacy access controls and retention/process tests.

### Priority 2: Medium Risk Tests
- Concurrency: multiple actions on the same image from different tabs.
- Authorization: ensure only owners can discard.

### Priority 3: Low Risk Tests
- Analytics event schema validation.
- Performance tests on feedback queries.

## Risk Acceptance Criteria

### Must Fix Before Production
- TECH-001 (accounting), DATA-001 (privacy/retention basics).

### Can Deploy With Mitigation
- SEC-001 (strong AuthZ), TECH-002 (reconciliation), PERF-001 (monitoring), BUS-001 (UX with confirmations/undo).

### Accepted Risks
- Minor UI inconsistencies; monitored via user feedback.

## Monitoring Requirements

- Track discard rates, undo usage, and accounting anomalies.
- Monitor access failures and AuthZ errors on feedback endpoints.

