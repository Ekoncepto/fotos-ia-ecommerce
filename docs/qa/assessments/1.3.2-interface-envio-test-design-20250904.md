# Test Design: Story 1.3.2 - Interface de Envio

Date: 2025-09-04
Designer: Quinn (Test Architect)

## Test Strategy Overview

This test strategy ensures comprehensive coverage for the "Submission Interface" story, focusing on security, core functionality, and user experience. The priority is on validating the critical path from file upload to job creation, with a strong emphasis on security testing for file and data inputs.

- Total test scenarios: 12
- Unit tests: 5 (42%)
- Integration tests: 3 (25%)
- E2E tests: 4 (33%)
- Priority distribution: P0: 4, P1: 5, P2: 3

## Test Scenarios by Acceptance Criteria

### AC1: The main screen should guide the user through the process of uploading one or more reference photos.

#### Scenarios

| ID | Level | Priority | Test | Justification |
| --- | --- | --- | --- | --- |
| 1.3.2-E2E-001 | E2E | P1 | User can select one or more valid image files and see a confirmation. | Validates the primary user flow for the core feature. |
| 1.3.2-INT-001 | Integration | P1 | Frontend upload component correctly calls the backend API, and the backend receives the file. | Tests the critical interaction between frontend and backend. |
| 1.3.2-UNIT-001 | Unit | P0 | Backend file handler validates file types, rejecting non-image files. | Critical security check to prevent malicious file uploads. |
| 1.3.2-UNIT-002 | Unit | P1 | Frontend upload component's state updates correctly when files are added or removed. | Tests client-side logic in isolation. |

### AC 2: The interface must contain text fields for the product name and category.

#### Scenarios

| ID | Level | Priority | Test | Justification |
| --- | --- | --- | --- | --- |
| 1.3.2-E2E-002 | E2E | P1 | User can see and type text into the "product name" and "product category" fields. | Ensures basic UI elements are present and interactable. |
| 1.3.2-UNIT-003 | Unit | P0 | Backend service sanitizes input from text fields to prevent XSS. | Critical security check for user-supplied data. |
| 1.3.2-UNIT-004 | Unit | P2 | Frontend form component correctly handles state changes as the user types. | Basic client-side state management. |

### AC 3: A "Generate Photos" button should be active only after filling in the necessary information.

#### Scenarios

| ID | Level | Priority | Test | Justification |
| --- | --- | --- | --- | --- |
| 1.3.2-E2E-003 | E2E | P1 | Button is enabled only after at least one photo is uploaded AND both text fields are filled. | Validates the complete user-facing workflow and gating logic. |
| 1.3.2-INT-002 | Integration | P0 | Clicking the enabled button successfully submits all data and initiates the backend generation process. | This is the critical business transaction for the story. |
| 1.3.2-UNIT-005 | Unit | P1 | Frontend form's conditional logic for enabling the button is correct for all state combinations. | Complex conditional logic is best tested in isolation. |

## Additional Scenarios (from Risk Analysis)

#### Scenarios

| ID | Level | Priority | Test | Justification |
| --- | --- | --- | --- | --- |
| 1.3.2-INT-003 | Integration | P0 | Backend API rejects files that exceed the configured maximum size limit. | Critical for preventing Denial of Service attacks (Risk SEC-003). |
| 1.3.2-E2E-004 | E2E | P2 | A progress indicator is displayed to the user during file upload. | Important for good user experience (Risk PERF-001). |

## Recommended Execution Order

1.  **P0 Tests (Critical Path & Security)**
    *   `1.3.2-UNIT-001` (File Type Validation)
    *   `1.3.2-UNIT-003` (XSS Prevention)
    *   `1.3.2-INT-002` (Submission Transaction)
    *   `1.3.2-INT-003` (File Size Limit)
2.  **P1 Tests (Core Functionality)**
    *   Run all P1 unit, integration, and E2E tests to validate the main user journey and component interactions.
3.  **P2 Tests (UX & Polish)**
    *   Run P2 tests as time permits to validate user experience enhancements.
